数独的一个实现
=============

数独是一个风靡全球的数字游戏。游戏先给出一个9x9的表格，表格又分成9个3x3的小块，即9个宫。其中表格给出一些数字，而游戏者的目的是推测其余的数字，使表格中的数字满足每行、每列和每个3x3块(每个宫)中没有重复的数。详见wikipedia：http://zh.wikipedia.org/wiki/%E6%95%B8%E7%8D%A8

在计算机科学中这个表可以根据回溯法来推出来，但是这里我没有用回溯法，原因之一：用回溯发要保证3x3块不重复有点复杂；原因二：回溯法的生成速度比较慢。

我的这个实现的基本思路,是先生成其中一个随机宫，然后对其进行列做调换操作来生成其他的8个宫。这个方法的致命缺点是数独的数量只有9!（362,880）个，远远小于数独可能的数量。而且块与块之间有相关性，比较容易猜，所以游戏的难度大幅度下滑。

生成过程
-------

* 首先我们对数独的宫进行编号，依次有左到右编号：
  +-+-+-+
  |1|2|3|
  +-+-+-+
  |4|5|6|
  +-+-+-+
  |7|8|9|
  +-+-+-+

* 生成一个随机的3x3块
  这里核心是使用标准库中的shuffle来对1～9进行随机排序。然后把这个九个数填入数独的第一个宫中。如下表：
  +=+=+=+=+=+=+=+=+=+
  |8|7|4| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |9|1|2| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |5|3|6| | | | | | |
  +=+=+=+=+=+=+=+=+=+
  | | | | | | | | | |
  +-+-+-+-+-+-+-+-+-+
  | | | | | | | | | |
  +-+-+-+-+-+-+-+-+-+
  | | | | | | | | | |
  +=+=+=+=+=+=+=+=+=+
  | | | | | | | | | |
  +-+-+-+-+-+-+-+-+-+
  | | | | | | | | | |
  +-+-+-+-+-+-+-+-+-+
  | | | | | | | | | |
  +=+=+=+=+=+=+=+=+=+

* 翻转生产其他块。生成先按列开始（为什么？），先依次生成4、7号宫，然后再根据没列的第一号宫来生成按行生成其他宫：
  - 4号宫的生成方式是调换1号宫的列，调换规则是把1号宫的第1行的数放在4号宫的第3列，第2列放到第1列上，第3列放到第2列上。
  +=+=+=+=+=+=+=+=+=+  
  |8|7|4| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |9|1|2| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |5|3|6| | | | | | |
  +=+=+=+=+=+=+=+=+=+
  |7|4|8| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |1|2|9| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |3|6|5| | | | | | |
  +=+=+=+=+=+=+=+=+=+
  | | | | | | | | | |
  +-+-+-+-+-+-+-+-+-+
  | | | | | | | | | |
  +-+-+-+-+-+-+-+-+-+
  | | | | | | | | | |
  +=+=+=+=+=+=+=+=+=+


  - 7号宫的生成方式改成调换列（为什么？），调换规则是把1号宫的第1行的数放在第2列，第2列放到第3列上，第3列放到第1列上。
  +=+=+=+=+=+=+=+=+=+  
  |8|7|4| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |9|1|2| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |5|3|6| | | | | | |
  +=+=+=+=+=+=+=+=+=+
  |7|4|8| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |1|2|9| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |3|6|5| | | | | | |
  +=+=+=+=+=+=+=+=+=+
  |4|8|7| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |2|9|1| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |6|5|3| | | | | | |
  +=+=+=+=+=+=+=+=+=+

  - 由于每列的第1个宫都已经生成，现在开始按行生成其他宫。2号宫所在的列的地一个宫是1号宫，并且1号宫已经生成，那么我们直接对1号宫进行行条换操作来生成2号宫，把1号宫的第1行调换到第3行的位置，第2行调换到第1行，第3行调换到第2行，结果如下表：
  +=+=+=+=+=+=+=+=+=+
  |8|7|4|9|1|2| | | |
  +-+-+-+-+-+-+-+-+-+
  |9|1|2|5|3|6| | | |
  +-+-+-+-+-+-+-+-+-+
  |5|3|6|8|7|4| | | |
  +=+=+=+=+=+=+=+=+=+
  |7|4|8| | | | | | |   
  +-+-+-+-+-+-+-+-+-+
  |1|2|9| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |3|6|5| | | | | | |
  +=+=+=+=+=+=+=+=+=+
  |4|8|7| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |2|9|1| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |6|5|3| | | | | | | 
  +=+=+=+=+=+=+=+=+=+

  - 3号宫的调换规则变成1号宫的第1行放到3号宫的第2行，第2行放到第3行，第3行放到第1行的位置上。
  +=+=+=+=+=+=+=+=+=+
  |8|7|4|9|1|2|5|3|6|
  +-+-+-+-+-+-+-+-+-+
  |9|1|2|5|3|6|8|7|4|
  +-+-+-+-+-+-+-+-+-+
  |5|3|6|8|7|4|9|1|2|
  +=+=+=+=+=+=+=+=+=+
  |7|4|8| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |1|2|9| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |3|6|5| | | | | | |
  +=+=+=+=+=+=+=+=+=+
  |4|8|7| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |2|9|1| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |6|5|3| | | | | | |
  +=+=+=+=+=+=+=+=+=+

  - 5号宫的规则和2号一样，但是基础宫是以它所在的宫列的第一个宫——4号宫。把4号宫的第1行调换到第3行的位置，第2行调换到第1行，第3行调换到第2行，结果如下表：
  +=+=+=+=+=+=+=+=+=+
  |8|7|4|9|1|2|5|3|6|
  +-+-+-+-+-+-+-+-+-+
  |9|1|2|5|3|6|8|7|4|
  +-+-+-+-+-+-+-+-+-+
  |5|3|6|8|7|4|9|1|2|
  +=+=+=+=+=+=+=+=+=+
  |7|4|8|1|2|9| | | |
  +-+-+-+-+-+-+-+-+-+
  |1|2|9|3|6|5| | | |
  +-+-+-+-+-+-+-+-+-+
  |3|6|5|7|4|8| | | |
  +=+=+=+=+=+=+=+=+=+
  |4|8|7| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |2|9|1| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |6|5|3| | | | | | |
  +=+=+=+=+=+=+=+=+=+
  - 6号宫和3号宫一样，其基础宫是4号宫。
  +=+=+=+=+=+=+=+=+=+
  |8|7|4|9|1|2|5|3|6|
  +-+-+-+-+-+-+-+-+-+
  |9|1|2|5|3|6|8|7|4|
  +-+-+-+-+-+-+-+-+-+
  |5|3|6|8|7|4|9|1|2|
  +=+=+=+=+=+=+=+=+=+
  |7|4|8|1|2|9|3|6|5|
  +-+-+-+-+-+-+-+-+-+
  |1|2|9|3|6|5|7|4|8|
  +-+-+-+-+-+-+-+-+-+
  |3|6|5|7|4|8|1|2|9|
  +=+=+=+=+=+=+=+=+=+
  |4|8|7| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |2|9|1| | | | | | |
  +-+-+-+-+-+-+-+-+-+
  |6|5|3| | | | | | |
  +=+=+=+=+=+=+=+=+=+
  - 8号宫和2号宫一样，其基础宫是7号宫。
  +=+=+=+=+=+=+=+=+=+
  |8|7|4|9|1|2|5|3|6|
  +-+-+-+-+-+-+-+-+-+
  |9|1|2|5|3|6|8|7|4|
  +-+-+-+-+-+-+-+-+-+
  |5|3|6|8|7|4|9|1|2|
  +=+=+=+=+=+=+=+=+=+
  |7|4|8|1|2|9|3|6|5|
  +-+-+-+-+-+-+-+-+-+
  |1|2|9|3|6|5|7|4|8|
  +-+-+-+-+-+-+-+-+-+
  |3|6|5|7|4|8|1|2|9|
  +=+=+=+=+=+=+=+=+=+
  |4|8|7|2|9|1| | | |
  +-+-+-+-+-+-+-+-+-+
  |2|9|1|6|5|3| | | |
  +-+-+-+-+-+-+-+-+-+
  |6|5|3|4|8|7| | | |
  +=+=+=+=+=+=+=+=+=+
  - 9号宫和3号宫一样，其基础宫是4号宫。
  +=+=+=+=+=+=+=+=+=+
  |8|7|4|9|1|2|5|3|6|
  +-+-+-+-+-+-+-+-+-+
  |9|1|2|5|3|6|8|7|4|
  +-+-+-+-+-+-+-+-+-+
  |5|3|6|8|7|4|9|1|2|
  +=+=+=+=+=+=+=+=+=+
  |7|4|8|1|2|9|3|6|5|
  +-+-+-+-+-+-+-+-+-+
  |1|2|9|3|6|5|7|4|8|
  +-+-+-+-+-+-+-+-+-+
  |3|6|5|7|4|8|1|2|9|
  +=+=+=+=+=+=+=+=+=+
  |4|8|7|2|9|1|6|5|3|
  +-+-+-+-+-+-+-+-+-+
  |2|9|1|6|5|3|4|8|7|
  +-+-+-+-+-+-+-+-+-+
  |6|5|3|4|8|7|2|9|1|
  +=+=+=+=+=+=+=+=+=+

代码实现
-------


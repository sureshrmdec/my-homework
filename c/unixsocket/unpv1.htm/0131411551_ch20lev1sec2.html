<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="20.2 Broadcast Addresses"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_ch20lev1sec1.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_ch20lev1sec3.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch20lev1sec2"></A>
<H3 class="docSection1Title">20.2 Broadcast Addresses</H3>
<P class="docText">If we denote an IPv4 address as {<span class="docEmphasis">subnetid</span>, <span class="docEmphasis">hostid</span>}, where <span class="docEmphasis">subnetid</span> represents the bits that are covered by the network mask (or the CIDR prefix) and <span class="docEmphasis">hostid</span> represents the bits that are not, then we have two types of broadcast addresses. We denote a field containing all one bits as –1.</P>
<span style="font-weight:bold"><OL class="docList" TYPE="1"><LI><span style="font-weight:normal"><p class="docText"><span class="docEmphRoman">Subnet-directed broadcast address:</span> {<span class="docEmphasis">subnetid</span>, –1}—This addresses all the interfaces on the specified subnet. For example, if we have the subnet 192.168.42/24, then 192.168.42.255 would be the subnet-directed broadcast address for all interfaces on the 192.168.42/24 subnet.</p><P class="docList">Normally, routers do not forward these broadcasts (pp. 226–227 of TCPv2). In <A class="docLink" HREF="#ch20fig02">Figure 20.2</A>, we show a router connected to the two subnets 192.168.42/24 and 192.168.123/24.</P><CENTER>
<H5 class="docFigureTitle"><A NAME="ch20fig02"></A>Figure 20.2. Does a router forward a subnet-directed broadcast?</H5>

<p class="docText">
<IMG BORDER="0" WIDTH="314" HEIGHT="219" src="FILES/20fig02.gif" ALT="graphics/20fig02.gif"></p>

</CENTER><P class="docList">The router receives a unicast IP datagram on the 192.168.123/24 subnet with a destination address of 192.168.42.255 (the subnet-directed broadcast address of another interface). The router normally does not forward the datagram on to the 192.168.42/24 subnet. Some systems have a configuration option that allows subnet-directed broadcasts to be forwarded (Appendix E of TCPv1).</P><BLOCKQUOTE><P><P class="docList">Forwarding subnet-directed broadcasts enables a class of denial-of-service attacks called "amplification" attacks; for instance, sending an ICMP echo request to a subnet-directed broadcast address can cause multiple replies to be sent for a single request. Combined with a forged IP source address, this results in a bandwidth utilization attack against the victim system, so it's advisable to leave this configuration option off.</P></P><P><P class="docList">For this reason, it's inadvisable to design an application that relies on forwarding of subnet-directed broadcasts except in a controlled environment, where you know it's safe to turn them on.</P></P></BLOCKQUOTE></span></LI><LI><span style="font-weight:normal"><p class="docText"><span class="docEmphRoman">Limited broadcast address:</span> {–1, –1, –1} or 255.255.255.255—Datagrams destined to this address must never be forwarded by a router.</p><BLOCKQUOTE><P><P class="docList">255.255.255.255 is to be used as the destination address during the bootstrap process by applications such as BOOTP and DHCP, which do not yet know the node's IP address.</P></P><P><P class="docList">The question is: What does a host do when an application sends a UDP datagram to 255.255.255.255? Most hosts allow this (assuming the process has set the <TT>SO_BROADCAST</TT> socket option) and convert the destination address to the subnet-directed broadcast address of the outgoing interface. It is often necessary to access the datalink directly (<A class="docLink" HREF="0131411551_ch29.html#ch29">Chapter 29</A>) to send a packet to 255.255.255.255.</P></P><P><P class="docList">Another question is: What does a multihomed host do when the application sends a UDP datagram to 255.255.255.255? Some systems send a single broadcast on the primary interface (the first interface that was configured) with the destination IP address set to the subnet-directed broadcast address of that interface (p. 736 of TCPv2). Other systems send one copy of the datagram out from each broadcast-capable interface. Section 3.3.6 of RFC 1122 [Braden 1989] "takes no stand" on this issue. For portability, however, if an application needs to send a broadcast out from all broadcast-capable interfaces, it should obtain the interface configuration (<A class="docLink" HREF="0131411551_ch17lev1sec6.html#ch17lev1sec6">Section 17.6</A>) and do one <TT>sendto</TT> for each broadcast-capable interface with the destination set to that interface's broadcast address.</P></P></BLOCKQUOTE></span></LI></OL></span>

<ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_ch20lev1sec1.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_ch20lev1sec3.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>

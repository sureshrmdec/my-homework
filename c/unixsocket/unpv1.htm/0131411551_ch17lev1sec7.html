<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="17.7 Interface Operations"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_ch17lev1sec6.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_ch17lev1sec8.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch17lev1sec7"></A>
<H3 class="docSection1Title">17.7 Interface Operations</H3>
<P class="docText">As we showed in the previous section, the <TT>SIOCGIFCONF</TT> request returns the name and a socket address structure for each interface that is configured. There are a multitude of other requests that we can then issue to set or get all the other characteristics of the interface. The <span class="docEmphasis">get</span> version of these requests (<TT>SIOCGxxx</TT>) is often issued by the <TT>netstat</TT> program, and the <span class="docEmphasis">set</span> version (<TT>SIOCSxxx</TT>) is often issued by the <TT>ifconfig</TT> program. Any user can get the interface information, while it takes superuser privileges to set the information.</P>
<P class="docText">These requests take or return an <TT>ifreq</TT> structure whose address is specified as the third argument to <TT>ioctl</TT>. The interface is always identified by its name: <TT>le0</TT>, <TT>lo0</TT>, <TT>ppp0</TT>, etc. in the <TT>ifr_name</TT> member.</P>
<P class="docText">Many of these requests use a socket address structure to specify or return an IP address or address mask with the application. For IPv4, the address or mask is contained in the <TT>sin_addr</TT> member of an Internet socket address structure; for IPv6, it is in the <TT>sin6_addr</TT> member of an IPv6 socket address structure.</P>
<P><TABLE CELLSPACING="0" FRAME="void" RULES="none" CELLPADDING="5" WIDTH="100%"><COLGROUP align="left" span="2"><THEAD></THEAD><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>SIOCGIFADDR</TT></P></TD><TD class="docTableCell" valign="top"><P class="docText">Return the unicast address in the <TT>ifr_addr</TT> member.</P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>SIOCSIFADDR</TT></P></TD><TD class="docTableCell" valign="top"><P class="docText">Set the interface address from the <TT>ifr_addr</TT> member. The initialization function for the interface is also called.</P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>SIOCGIFFLAGS</TT></P></TD><TD class="docTableCell" valign="top"><P class="docText">Return the interface flags in the <TT>ifr_flags</TT> member. The names of the various flags are <TT>IFF_</TT><span class="docEmphasis">xxx</span> and are defined by including the <TT>&lt;net/if.h&gt;</TT> header. The flags indicate, for example, if the interface is up (<TT>IFF_UP</TT>), if the interface is a point-to-point interface (<TT>IFF_POINTOPOINT</TT>), if the interface supports broadcasting (<TT>IFF_BROADCAST</TT>), and so on.</P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>SIOCSIFFLAGS</TT></P></TD><TD class="docTableCell" valign="top"><P class="docText">Set the interface flags from the <TT>ifr_flags</TT> member.</P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>SIOCGIFDSTADDR</TT></P></TD><TD class="docTableCell" valign="top"><P class="docText">Return the point-to-point address in the <TT>ifr_dstaddr</TT> member.</P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>SIOCSIFDSTADDR</TT></P></TD><TD class="docTableCell" valign="top"><P class="docText">Set the point-to-point address from the <TT>ifr_dstaddr</TT> member.</P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>SIOCGIFBRDADDR</TT></P></TD><TD class="docTableCell" valign="top"><P class="docText">Return the broadcast address in the <TT>ifr_broadaddr</TT> member. The application must first fetch the interface flags and then issue the correct request: <TT>SIOCGIFBRDADDR</TT> for a broadcast interface or <TT>SIOCGIFDSTADDR</TT> for a point-to-point interface.</P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>SIOCSIFBRDADDR</TT></P></TD><TD class="docTableCell" valign="top"><P class="docText">Set the broadcast address from the <TT>ifr_broadaddr</TT> member.</P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>SIOCGIFNETMASK</TT></P></TD><TD class="docTableCell" valign="top"><P class="docText">Return the subnet mask in the <TT>ifr_addr</TT> member.</P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>SIOCSIFNETMASK</TT></P></TD><TD class="docTableCell" valign="top"><P class="docText">Set the subnet mask from the <TT>ifr_addr</TT> member.</P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>SIOCGIFMETRIC</TT></P></TD><TD class="docTableCell" valign="top"><P class="docText">Return the interface metric in the <TT>ifr_metric</TT> member. The interface metric is maintained by the kernel for each interface but is used by the routing daemon <TT>routed</TT>. The interface metric is added to the hop count (to make an interface less favorable).</P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>SIOCSIFMETRIC</TT></P></TD><TD class="docTableCell" valign="top"><P class="docText">Set the interface routing metric from the <TT>ifr_metric</TT> member.</P></TD></TR></COLGROUP></TABLE></P>
<P class="docText">In this section, we described the generic interface requests. Many implementations have additional requests as well.</P>

<a href="0131411551_23961534.html"><img src="FILES/pixel.gif" width="1" height="1" border="0"></a><ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_ch17lev1sec6.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_ch17lev1sec8.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>

<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="10.1 Introduction"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_ch10.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_ch10lev1sec2.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch10lev1sec1"></A>
<H3 class="docSection1Title">10.1 Introduction</H3>
<P class="docText">We will now use some of the elementary functions from <A class="docLink" HREF="0131411551_ch04.html#ch04">Chapters 4</A> and <A class="docLink" HREF="0131411551_ch09.html#ch09">Chapter 9</A> to write a complete one-to-many SCTP client/server example. Our simple example is similar to the echo server presented in <A class="docLink" HREF="0131411551_ch05.html#ch05">Chapter 5</A>, and performs the following steps:</P>
<A NAME="ch10pro01"></A>



<span style="font-weight:bold"><OL class="docList" START="1"><LI><span style="font-weight:normal" value="1"><P class="docText">A client reads a line of text from standard input and sends the line to the server. The line follows the form <span class="docEmphStrong"><TT>[#] text</TT></span>, where the number in brackets is the SCTP stream number on which the text message should be sent.</P>
</span></LI><LI><span style="font-weight:normal" value="2"><P class="docText">The server receives the text message from the network, increases the stream number on which the message arrived by one, and sends the text message back to the client on this new stream number.</P>
</span></LI><LI><span style="font-weight:normal" value="3"><P class="docText">The client reads the echoed line and prints it on its standard output, displaying the stream number, stream sequence number, and text string.</P>
</span></LI></OL></span>
<P class="docText"><A class="docLink" HREF="#ch10fig01">Figure 10.1</A> depicts this simple client/server along with the functions used for input and output.</P>
<CENTER>
<H5 class="docFigureTitle"><A NAME="ch10fig01"></A>Figure 10.1. Simple SCTP streaming echo client and server.</H5>

<p class="docText">
<IMG BORDER="0" WIDTH="500" HEIGHT="73" src="FILES/10fig01.gif" ALT="graphics/10fig01.gif"></p>

</CENTER>
<P class="docText">We show two arrows between the client and server depicting two unidirectional streams being used, even though the overall association is full-duplex. The <TT>fgets</TT> and <TT>fputs</TT> functions are from the standard I/O library. We do not use the <TT>writen</TT> and <TT>readline</TT> functions defined in <A class="docLink" HREF="0131411551_ch03lev1sec9.html#ch03lev1sec9">Section 3.9</A> since they are unnecessary. Instead, we use the <TT>sctp_sendmsg</TT> and <TT>sctp_recvmsg</TT> functions defined in <A class="docLink" HREF="0131411551_ch09lev1sec9.html#ch09lev1sec9">Sections 9.9</A> and <A class="docLink" HREF="0131411551_ch09lev1sec10.html#ch09lev1sec10">Sections 9.10</A>, respectively.</P>
<P class="docText">For this example, we use a one-to-many-style server. We make this choice for one important reason. The examples in <A class="docLink" HREF="0131411551_ch05.html#ch05">Chapter 5</A> can be modified to run over SCTP with one minor change: modify the <TT>socket</TT> function call to specify <TT>IPPROTO_SCTP</TT> instead of <TT>IPPROTO_TCP</TT> as the third argument. Simply making this change, however, would not take advantage of any of the additional features provided by SCTP except multihoming. Using the one-to-many style allows us to exercise all of SCTP's features.</P>

<a href="0131411551_22961534.html"><img src="FILES/pixel.gif" width="1" height="1" border="0"></a><ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_ch10.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_ch10lev1sec2.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>

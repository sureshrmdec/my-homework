<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="5.17 Summary of TCP Example"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_ch05lev1sec16.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_ch05lev1sec18.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch05lev1sec17"></A>
<H3 class="docSection1Title">5.17 Summary of TCP Example</H3>
<P class="docText">Before any TCP client and server can communicate with each other, each end must specify the socket pair for the connection: the local IP address, local port, foreign IP address, and foreign port. In <A class="docLink" HREF="#ch05fig15">Figure 5.15</A>, we show these four values as bullets. This figure is from the client's perspective. The foreign IP address and foreign port must be specified by the client in the call to <TT>connect</TT>. The two local values are normally chosen by the kernel as part of the <TT>connect</TT> function. The client has the option of specifying either or both of the local values, by calling <TT>bind</TT> before <TT>connect</TT>, but this is not common.</P>
<CENTER>
<H5 class="docFigureTitle"><A NAME="ch05fig15"></A>Figure 5.15. Summary of TCP client/server from client's perspective.</H5>

<p class="docText">
<IMG BORDER="0" WIDTH="500" HEIGHT="325" src="FILES/05fig15.gif" ALT="graphics/05fig15.gif"></p>

</CENTER>
<P class="docText">As we mentioned in <A class="docLink" HREF="0131411551_ch04lev1sec10.html#ch04lev1sec10">Section 4.10</A>, the client can obtain the two local values chosen by the kernel by calling <TT>getsockname</TT> after the connection is established.</P>
<P class="docText"><A class="docLink" HREF="#ch05fig16">Figure 5.16</A> shows the same four values, but from the server's perspective.</P>
<CENTER>
<H5 class="docFigureTitle"><A NAME="ch05fig16"></A>Figure 5.16. Summary of TCP client/server from server's perspective.</H5>

<p class="docText">
<IMG BORDER="0" WIDTH="500" HEIGHT="309" src="FILES/05fig16.gif" ALT="graphics/05fig16.gif"></p>

</CENTER>
<P class="docText">The local port (the server's well-known port) is specified by <TT>bind</TT>. Normally, the server also specifies the wildcard IP address in this call. If the server binds the wildcard IP address on a multihomed host, it can determine the local IP address by calling <TT>getsockname</TT> after the connection is established (<A class="docLink" HREF="0131411551_ch04lev1sec10.html#ch04lev1sec10">Section 4.10</A>). The two foreign values are returned to the server by <TT>accept</TT>. As we mentioned in <A class="docLink" HREF="0131411551_ch04lev1sec10.html#ch04lev1sec10">Section 4.10</A>, if another program is <TT>execed</TT> by the server that calls <TT>accept</TT>, that program can call <TT>getpeername</TT> to determine the client's IP address and port, if necessary.</P>

<a href="0131411551_22961534.html"><img src="FILES/pixel.gif" width="1" height="1" border="0"></a><ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_ch05lev1sec16.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_ch05lev1sec18.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>

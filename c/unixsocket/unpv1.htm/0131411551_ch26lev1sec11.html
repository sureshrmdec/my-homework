<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="Exercises"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_ch26lev1sec10.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_ch27.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch26lev1sec11"></A>
<H3 class="docSection1Title"> Exercises</H3>
<P><TABLE BORDER="0" cellspacing="16" cellpadding="0"><TR valign="top"><TD align="right" class="docText"><A NAME="ch26q01"></A><B><A class="docLink" HREF="0131411551_app05lev1sec24.html#ch26a01">26.1</A></B></TD><TD><P class="docText">Compare the descriptor usage in a server using <TT>fork</TT> versus a server using a thread, assuming 100 clients are being serviced at the same time.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch26q02"></A><B><A class="docLink" HREF="0131411551_app05lev1sec24.html#ch26a02">26.2</A></B></TD><TD><P class="docText">What happens in <A class="docLink" HREF="0131411551_ch26lev1sec4.html#ch26fig03">Figure 26.3</A> if the thread does not <TT>close</TT> the connected socket when <TT>str_echo</TT> returns?</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch26q03"></A><B><A class="docLink" HREF="0131411551_app05lev1sec24.html#ch26a03">26.3</A></B></TD><TD><P class="docText">In <A class="docLink" HREF="0131411551_ch05lev1sec5.html#ch05fig05">Figures 5.5</A> and <A class="docLink" HREF="0131411551_ch06lev1sec7.html#ch06fig13">6.13</A>, we print "server terminated prematurely" when we expect an echoed line from the server but receive an EOF instead (recall <A class="docLink" HREF="0131411551_ch05lev1sec12.html#ch05lev1sec12">Section 5.12</A>). Modify <A class="docLink" HREF="0131411551_ch26lev1sec3.html#ch26fig02">Figure 26.2</A> to print this message too, when appropriate.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch26q04"></A><B>26.4</B></TD><TD><P class="docText">Modify <A class="docLink" HREF="0131411551_ch26lev1sec5.html#ch26fig11">Figures 26.11</A> and <A class="docLink" HREF="0131411551_ch26lev1sec5.html#ch26fig12">26.12</A> so that they can compile on a system that does not support threads.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch26q05"></A><B>26.5</B></TD><TD><P class="docText">To see the error with the <TT>readline</TT> function that is used in <A class="docLink" HREF="0131411551_ch26lev1sec4.html#ch26fig03">Figure 26.3</A>, build that program and start the server. Then, build the TCP echo client from <A class="docLink" HREF="0131411551_ch06lev1sec7.html#ch06fig13">Figure 6.13</A> that works in a batch mode correctly. Find a large text file on your system and start the client three times in a batch mode, reading from the large text file and writing its output to a temporary file. If possible, run the clients on a different host from the server. If the three clients terminate correctly (often they hang), look at their temporary output files and compare them to the input file.</P>
<P class="docText">Now build a version of the server using the correct <TT>readline</TT> function from <A class="docLink" HREF="0131411551_ch26lev1sec5.html#ch26lev1sec5">Section 26.5</A>. Rerun the test with three clients; all three clients should now work. You should also put a <TT>printf</TT> in the <TT>readline_destructor</TT> function, the <TT>readline_once</TT> function, and in the call to <TT>malloc</TT> in <TT>readline</TT>. This shows that the key is created only one time, but the memory is allocated for every thread, and that the destructor function is called for every thread.</P></TD></TR></TABLE></P><br> 

<a href="0131411551_23961534.html"><img src="FILES/pixel.gif" width="1" height="1" border="0"></a><ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_ch26lev1sec10.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_ch27.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>

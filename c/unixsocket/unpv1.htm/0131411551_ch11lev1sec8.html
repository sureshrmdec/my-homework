<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="11.8 'freeaddrinfo' Function"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_ch11lev1sec7.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_ch11lev1sec9.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch11lev1sec8"></A>
<H3 class="docSection1Title">11.8 <TT>freeaddrinfo</TT> Function</H3>
<P class="docText">All the storage returned by <TT>getaddrinfo</TT>, the <TT>addrinfo</TT> structures, the <TT>ai_addr</TT> structures, and the <TT>ai_canonname</TT> string are obtained dynamically (e.g., from <TT>malloc</TT>). This storage is returned by calling <TT>freeaddrinfo</TT>.</P>
<P><TABLE CELLSPACING="0" BORDER="1" RULES="none" CELLPADDING="5" WIDTH="100%"><COLGROUP align="left" span="1"><THEAD></THEAD><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>#include &lt;netdb.h&gt;</TT></P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>void freeaddrinfo (struct addrinfo *ai);</TT></P></TD></TR></COLGROUP></TABLE></P>
<P class="docText"><span class="docEmphasis">ai</span> should point to the first <TT>addrinfo</TT> structure returned by <TT>getaddrinfo</TT>. All the structures in the linked list are freed, along with any dynamic storage pointed to by those structures (e.g., socket address structures and canonical hostnames).</P>
<P class="docText">Assume we call <TT>getaddrinfo</TT>, traverse the linked list of <TT>addrinfo</TT> structures, and find the desired structure. If we then try to save a copy of the information by copying just the <TT>addrinfo</TT> structure and calling <TT>freeaddrinfo</TT>, we have a lurking bug. The reason is that the <TT>addrinfo</TT> structure itself points to dynamically allocated memory (for the socket address structure and possibly the canonical name), and memory pointed to by our saved structure is returned to the system when <TT>freeaddrinfo</TT> is called and can be used for something else.</P>
<BLOCKQUOTE><P><P class="docList">Making a copy of just the <TT>addrinfo</TT> structure and not the structures that it in turn points to is called a <span class="docEmphasis">shallow copy</span>. Copying the <TT>addrinfo</TT> structure and all the structures that it points to is called a <span class="docEmphasis">deep copy</span>.</P></P></BLOCKQUOTE>

<a href="0131411551_22961534.html"><img src="FILES/pixel.gif" width="1" height="1" border="0"></a><ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_ch11lev1sec7.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_ch11lev1sec9.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>

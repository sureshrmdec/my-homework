<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="15.4 Socket Functions"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_ch15lev1sec3.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_ch15lev1sec5.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch15lev1sec4"></A>
<H3 class="docSection1Title" id="162666-978">15.4 Socket Functions</H3>
<P class="docText">There are several differences and restrictions in the socket functions when using Unix domain sockets. We list the POSIX requirements when applicable, and note that not all implementations are currently at this level.</P>
<span style="font-weight:bold"><OL class="docList" TYPE="1"><LI><span style="font-weight:normal"><P class="docList">The default file access permissions for a pathname created by <TT>bind</TT> should be 0777 (read, write, and execute by user, group, and other), modified by the current <TT>umask</TT> value.</P></span></LI><LI><span style="font-weight:normal"><P class="docList">The pathname associated with a Unix domain socket should be an absolute pathname, not a relative pathname. The reason to avoid the latter is that its resolution depends on the current working directory of the caller. That is, if the server binds a relative pathname, then the client must be in the same directory as the server (or must know this directory) for the client's call to either <TT>connect</TT> or <TT>sendto</TT> to succeed.</P><BLOCKQUOTE><P><P class="docList">POSIX says that binding a relative pathname to a Unix domain socket gives unpredictable results.</P></P></BLOCKQUOTE></span></LI><LI><span style="font-weight:normal"><P class="docList">The pathname specified in a call to <TT>connect</TT> must be a pathname that is currently bound to an open Unix domain socket of the same type (stream or datagram). Errors occur if: (i) the pathname exists but is not a socket; (ii) the pathname exists and is a socket, but no open socket descriptor is associated with the pathname; or (iii) the pathname exists and is an open socket, but is of the wrong type (that is, a Unix domain stream socket cannot connect to a pathname associated with a Unix domain datagram socket, and vice versa).</P></span></LI><LI><span style="font-weight:normal"><P class="docList">The permission testing associated with the <TT>connect</TT> of a Unix domain socket is the same as if <TT>open</TT> had been called for write-only access to the pathname.</P></span></LI><LI><span style="font-weight:normal"><P class="docList">Unix domain stream sockets are similar to TCP sockets: They provide a byte stream interface to the process with no record boundaries.</P></span></LI><LI><span style="font-weight:normal"><P class="docList">If a call to <TT>connect</TT> for a Unix domain stream socket finds that the listening socket's queue is full (<A class="docLink" HREF="0131411551_ch04lev1sec5.html#ch04lev1sec5">Section 4.5</A>), <TT>ECONNREFUSED</TT> is returned immediately. This differs from TCP: The TCP listener ignores an arriving SYN if the socket's queue is full, and the TCP connector retries by sending the SYN several times.</P></span></LI><LI><span style="font-weight:normal"><P class="docList">Unix domain datagram sockets are similar to UDP sockets: They provide an unreliable datagram service that preserves record boundaries.</P></span></LI><LI><span style="font-weight:normal"><P class="docList">Unlike UDP sockets, sending a datagram on an unbound Unix domain datagram socket does not bind a pathname to the socket. (Recall that sending a UDP datagram on an unbound UDP socket causes an ephemeral port to be bound to the socket.) This means the receiver of the datagram will be unable to send a reply unless the sender has bound a pathname to its socket. Similarly, unlike TCP and UDP, calling <TT>connect</TT> for a Unix domain datagram socket does not bind a pathname to the socket.</P></span></LI></OL></span>

<ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_ch15lev1sec3.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_ch15lev1sec5.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>

<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="15.3 'socketpair' Function"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_ch15lev1sec2.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_ch15lev1sec4.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch15lev1sec3"></A>
<H3 class="docSection1Title">15.3 <TT>socketpair</TT> Function</H3>
<P class="docText">The <TT>socketpair</TT> function creates two sockets that are then connected together. This function applies only to Unix domain sockets.</P>
<P><TABLE CELLSPACING="0" BORDER="1" RULES="none" CELLPADDING="5" WIDTH="100%"><COLGROUP align="left" span="1"><THEAD></THEAD><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>#include &lt;sys/socket.h&gt;</TT></P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>int socketpair(int</TT> <span class="docEmphasis">family</span>, <TT>int</TT> <span class="docEmphasis">type</span>, <TT>int</TT> <span class="docEmphasis">protocol</span>, <TT>int</TT> <span class="docEmphasis">sockfd[2]</span><TT>)</TT>;</P></TD></TR><TR><TD class="docTableCell" align="right" valign="top"><P class="docText">Returns: nonzero if OK, -1 on error</P></TD></TR></COLGROUP></TABLE></P>
<P class="docText">The <span class="docEmphasis">family</span> must be <TT>AF_LOCAL</TT> and the <span class="docEmphasis">protocol</span> must be 0. The <span class="docEmphasis">type</span>, however, can be either <TT>SOCK_STREAM</TT> or <TT>SOCK_DGRAM</TT>. The two socket descriptors that are created are returned as <span class="docEmphasis">sockfd[0]</span> and <span class="docEmphasis">sockfd[1]</span>.</P>
<BLOCKQUOTE><P><P class="docList">This function is similar to the Unix <TT>pipe</TT> function: Two descriptors are returned, and each descriptor is connected to the other. Indeed, Berkeley-derived implementations employ <TT>pipe</TT> by performing the same internal operations as <TT>socketpair</TT> (pp. 253–254 of TCPv3).</P></P></BLOCKQUOTE>
<P class="docText">The two created sockets are unnamed; that is, there is no implicit <TT>bind</TT> involved.</P>
<P class="docText">The result of <TT>socketpair</TT> with a <span class="docEmphasis">type</span> of <TT>SOCK_STREAM</TT> is called a <span class="docEmphasis">stream pipe</span>. It is similar to a regular Unix pipe (created by the <TT>pipe</TT> function), but a stream pipe is <span class="docEmphasis">full-duplex</span>; that is, both descriptors can be read and written. We show a picture of a stream pipe created by <TT>socketpair</TT> in <A class="docLink" HREF="0131411551_ch15lev1sec7.html#ch15fig07">Figure 15.7</A>.</P>
<BLOCKQUOTE><P><P class="docList">POSIX does not require full-duplex pipes. On SVR4, <TT>pipe</TT> returns two full-duplex descriptors, while Berkeley-derived kernels traditionally return two half-duplex descriptors (Figure 17.31 of TCPv3).</P></P></BLOCKQUOTE>

<a href="0131411551_22961534.html"><img src="FILES/pixel.gif" width="1" height="1" border="0"></a><ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_ch15lev1sec2.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_ch15lev1sec4.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>

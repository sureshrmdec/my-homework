<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="13.2 'syslogd' Daemon"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_ch13lev1sec1.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_ch13lev1sec3.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch13lev1sec2"></A>
<H3 class="docSection1Title">13.2 <TT>syslogd</TT> Daemon</H3>
<P class="docText">Unix systems normally start a daemon named <TT>syslogd</TT> from one of the system initializations scripts, and it runs as long as the system is up. Berkeley-derived implementations of <TT>syslogd</TT> perform the following actions on startup:</P>
<A NAME="ch13pro01"></A>




<span style="font-weight:bold"><OL class="docList" START="1"><LI><span style="font-weight:normal" value="1"><P class="docText">The configuration file, normally <TT>/etc/syslog.conf</TT>, is read, specifying what to do with each type of log message that the daemon can receive. These messages can be appended to a file (a special case of which is the file <TT>/dev/console</TT>, which writes the message to the console), written to a specific user (if that user is logged in), or forwarded to the <TT>syslogd</TT> daemon on another host.</P>
</span></LI><LI><span style="font-weight:normal" value="2"><P class="docText">A Unix domain socket is created and bound to the pathname <TT>/var/run/log</TT> (<TT>/dev/log</TT> on some systems).</P>
</span></LI><LI><span style="font-weight:normal" value="3"><P class="docText">A UDP socket is created and bound to port 514 (the <TT>syslog</TT> service).</P>
</span></LI><LI><span style="font-weight:normal" value="4"><P class="docText">The pathname <TT>/dev/klog</TT> is opened. Any error messages from within the kernel appear as input on this device.</P>
</span></LI></OL></span>
<P class="docText">The <TT>syslogd</TT> daemon runs in an infinite loop that calls <TT>select</TT>, waiting for any one of its three descriptors (from Steps 2, 3, and 4) to be readable; it reads the log message and does what the configuration file says to do with that message. If the daemon receives the <TT>SIGHUP</TT> signal, it rereads its configuration file.</P>
<P class="docText">We could send log messages to the <TT>syslogd</TT> daemon from our daemons by creating a Unix domain datagram socket and sending our messages to the pathname that the daemon has bound, but an easier interface is the <TT>syslog</TT> function that we will describe in the next section. Alternately, we could create a UDP socket and send our log messages to the loopback address and port 514.</P>
<BLOCKQUOTE><P><P class="docList">Newer implementations disable the creation of the UDP socket, unless specified by the administrator, as allowing anyone to send UDP datagrams to this port opens the system up to denial-of-service attacks, where someone could fill up the filesystem (e.g., by filling up log files) or cause log messages to be dropped (e.g., by overflowing <TT>syslog's</TT> socket receive buffer).</P></P><P><P class="docList">Differences exist between the various implementations of <TT>syslogd</TT>. For example, Unix domain sockets are used by Berkeley-derived implementations, but System V implementations use a <TT>STREAMS</TT> log driver. Different Berkeley-derived implementations use different pathnames for the Unix domain socket. We can ignore all these details if we use the <TT>syslog</TT> function.</P></P></BLOCKQUOTE>

<ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_ch13lev1sec1.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_ch13lev1sec3.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>

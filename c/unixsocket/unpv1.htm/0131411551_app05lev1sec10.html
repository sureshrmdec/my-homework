<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="Chapter 10"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_app05lev1sec9.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_app05lev1sec11.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="app05lev1sec10"></A>
<H3 class="docSection1Title" id="225793-805"> Chapter 10</H3>
<P><TABLE BORDER="0" cellspacing="16" cellpadding="0"><TR valign="top"><TD align="right" class="docText"><B></B></TD><TD><P class="docText"></P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch10a01"></A><B><A class="docLink" HREF="0131411551_ch10lev1sec9.html#ch10q01">10.1</A></B></TD><TD><P class="docText">If the <TT>sctp_sendmsg</TT> function returns an error, no message will be sent and the application would then do a blocking <TT>sctp_recvmsg</TT>, waiting for a response message that would never be sent to it.</P><P class="docText">A way to fix this is to check the error return codes, and if an error occurs on sending, the client should NOT do the receive, but instead should report an error.</P><P class="docText">If the <TT>sctp_recvmsg</TT> function returns an error, no message will arrive and the server will still attempt to send a message, possibly setting up an association. To avoid this, the error code should be checked, and depending on the error, you may wish to report the error and close the socket, letting the server also then receive an error; or, if the error is transient, you could retry the <TT>sctp_recvmsg</TT> call.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><B></B></TD><TD><P class="docText"></P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch10a02"></A><B><A class="docLink" HREF="0131411551_ch10lev1sec9.html#ch10q02">10.2</A></B></TD><TD><P class="docText">If the server receives a request and then exits, the client in its current form will hang forever waiting for a message that will never come. A method that can be used by the client to detect this is to enable association events. This will allow the client application to receive a message when the server exits, telling the client that the association is now gone. This would allow the client to then take a recovery action such as contacting a different server.</P><P class="docText">An alternative method the client could use is to set up a timer and abort after some time period.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><B></B></TD><TD><P class="docText"></P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch10a03"></A><B><A class="docLink" HREF="0131411551_ch10lev1sec9.html#ch10q03">10.3</A></B></TD><TD><P class="docText">We choose 800 bytes to attempt to get each chunk in a single packet. A better way would be to get or set the <TT>SCTP_MAXSEG</TT> socket option to determine the size that will fit in one chunk.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><B></B></TD><TD><P class="docText"></P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch10a04"></A><B><A class="docLink" HREF="0131411551_ch10lev1sec9.html#ch10q04">10.4</A></B></TD><TD><P class="docText">The Nagle algorithm (controlled by the <TT>SCTP_NODELAY</TT> socket option; see <A class="docLink" HREF="0131411551_ch07lev1sec10.html#ch07lev1sec10">Section 7.10</A>) will cause a problem only if we choose a small data transfer size. So as long as we send a size that forces SCTP to send immediately, no harm will occur. However, choosing a smaller size for <TT>out_sz</TT> would skew the results, holding some transmissions awaiting SACKs from the remote endpoint. So if a smaller size is to be used, turning off the Nagle algorithm (i.e., turning on the <TT>SCTP_NODELAY</TT> socket option) would be a good idea.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><B></B></TD><TD><P class="docText"></P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch10a05"></A><B><A class="docLink" HREF="0131411551_ch10lev1sec9.html#ch10q05">10.5</A></B></TD><TD><P class="docText">If an application sets up an association and then changes the number of streams, the association will not have a different number of streams, it will have the original number before the change. This is because changing the number of streams only affects new associations, not existing ones.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><B></B></TD><TD><P class="docText"></P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch10a06"></A><B><A class="docLink" HREF="0131411551_ch10lev1sec9.html#ch10q06">10.6</A></B></TD><TD><P class="docText">The one-to-many style allows implicit setup of associations. To use ancillary data to change the setup of an association, you need to use the <TT>sendmsg</TT> call to provide the data before the association is set up. Thus, you must use an implicit association setup.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><B></B></TD><TD><P class="docText"></P></TD></TR><TR valign="top"><TD align="right" class="docText"><B></B></TD><TD><P class="docText"></P></TD></TR></TABLE></P><br>
<P class="docText"></P>

<ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_app05lev1sec9.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_app05lev1sec11.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>

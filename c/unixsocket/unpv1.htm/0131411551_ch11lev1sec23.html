<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="Exercises"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_ch11lev1sec22.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_part03.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch11lev1sec23"></A>
<H3 class="docSection1Title" id="162666-819"> Exercises</H3>
<P><TABLE BORDER="0" cellspacing="16" cellpadding="0"><TR valign="top"><TD align="right" class="docText"><A NAME="ch11q01"></A><B><A class="docLink" HREF="0131411551_app05lev1sec11.html#ch11a01">11.1</A></B></TD><TD><P class="docText">Modify the program in <A class="docLink" HREF="0131411551_ch11lev1sec3.html#ch11fig03">Figure 11.3</A> to call <TT>gethostbyaddr</TT> for each returned address, and then print the <TT>h_name</TT> that is returned. First run the program specifying a hostname with just one IP address and then run the program specifying a hostname that has more than one IP address. What happens?</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch11q02"></A><B><A class="docLink" HREF="0131411551_app05lev1sec11.html#ch11a02">11.2</A></B></TD><TD><P class="docText">Fix the problem shown in the preceding exercise.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch11q03"></A><B><A class="docLink" HREF="0131411551_app05lev1sec11.html#ch11a03">11.3</A></B></TD><TD><P class="docText">Run <A class="docLink" HREF="0131411551_ch11lev1sec5.html#ch11fig04">Figure 11.4</A> specifying a service name of <TT>chargen</TT>.</P>
</TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch11q04"></A><B><A class="docLink" HREF="0131411551_app05lev1sec11.html#ch11a04">11.4</A></B></TD><TD><P class="docText">Run <A class="docLink" HREF="0131411551_ch11lev1sec5.html#ch11fig04">Figure 11.4</A> specifying a dotted-decimal IP address as the hostname. Does your resolver allow this? Modify <A class="docLink" HREF="0131411551_ch11lev1sec5.html#ch11fig04">Figure 11.4</A> to allow a dotted-decimal IP address as the hostname and a decimal port number string as the service name. In testing the IP address for either a dotted-decimal string or a hostname, in what order should these two tests be performed?</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch11q05"></A><B><A class="docLink" HREF="0131411551_app05lev1sec11.html#ch11a05">11.5</A></B></TD><TD><P class="docText">Modify <A class="docLink" HREF="0131411551_ch11lev1sec5.html#ch11fig04">Figure 11.4</A> to work with either IPv4 or IPv6.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch11q06"></A><B>11.6</B></TD><TD><P class="docText">Modify <A class="docLink" HREF="0131411551_ch08lev1sec8.html#ch08fig09">Figure 8.9</A> to query the DNS and compare the returned IP address with all the destination host's IP addresses. That is, call <TT>gethostbyaddr</TT> using the IP address returned by <TT>recvfrom</TT>, followed by <TT>gethostbyname</TT> to find all the IP addresses for the host.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch11q07"></A><B><A class="docLink" HREF="0131411551_app05lev1sec11.html#ch11a07">11.7</A></B></TD><TD><P class="docText">In <A class="docLink" HREF="0131411551_ch11lev1sec13.html#ch11fig12">Figure 11.12</A>, the caller must pass a pointer to an integer to obtain the size of the protocol address. If the caller does not do this (i.e., passes a null pointer as the final argument), how can the caller still obtain the actual size of the protocol's addresses?</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch11q08"></A><B><A class="docLink" HREF="0131411551_app05lev1sec11.html#ch11a08">11.8</A></B></TD><TD><P class="docText">Modify <A class="docLink" HREF="0131411551_ch11lev1sec13.html#ch11fig14">Figure 11.14</A> to call <TT>getnameinfo</TT> instead of <TT>sock_ntop</TT>. What flags should you pass to <TT>getnameinfo</TT>?</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch11q09"></A><B><A class="docLink" HREF="0131411551_app05lev1sec11.html#ch11a09">11.9</A></B></TD><TD><P class="docText">In <A class="docLink" HREF="0131411551_ch07lev1sec5.html#ch07lev1sec5">Section 7.5</A>, we discussed port stealing with the <TT>SO_REUSEADDR</TT> socket option. To see how this works, build the protocol-independent UDP daytime server in <A class="docLink" HREF="0131411551_ch11lev1sec16.html#ch11fig19">Figure 11.19</A>. Start one instance of the server in one window, binding the wildcard address and some port of your choosing. Start a client in another window and verify that this server is handling the client (note the <TT>printf</TT> in the server). Next, start another instance of the server in another window, this time binding one of the host's unicast addresses and the same port as the first server. What problem do you immediately encounter? Fix this problem and restart this second server. Start a client, send a datagram, and verify that the second server has stolen the port from the first server. If possible, start the second server again from a different login account on the first server to see if the stealing still succeeds. Some vendors will not allow the second bind unless the user ID is the same as that of the process that has already bound the port.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch11q10"></A><B><A class="docLink" HREF="0131411551_app05lev1sec11.html#ch11a10">11.10</A></B></TD><TD><P class="docText">At the end of <A class="docLink" HREF="0131411551_ch02lev1sec12.html#ch02lev1sec12">Section 2.12</A>, we showed two <TT>telnet</TT> examples: to the daytime server and to the echo server. Knowing that a client goes through the two steps <TT>gethostbyname</TT> and <TT>connect</TT>, which lines output by the client indicate which steps?</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch11q11"></A><B>11.11</B></TD><TD><P class="docText"><TT>getnameinfo</TT> can take a long time (up to 80 seconds) to return an error if a hostname cannot be found for an IP address. Write a new function named <TT>getnameinfo_timeo</TT> that takes an additional integer argument specifying the maximum number of seconds to wait for a reply. If the timer expires and the <TT>NI_NAMEREQD</TT> flag is not specified, just call <TT>inet_ntop</TT> and return an address string.</P></TD></TR></TABLE></P><br>


<ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_ch11lev1sec22.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_part03.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>

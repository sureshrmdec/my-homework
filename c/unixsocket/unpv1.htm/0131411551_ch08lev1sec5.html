<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="8.5 UDP Echo Client: 'main' Function"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_ch08lev1sec4.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_ch08lev1sec6.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch08lev1sec5"></A>
<H3 class="docSection1Title">8.5 UDP Echo Client: <TT>main</TT> Function</H3>
<P class="docText">The UDP client <TT>main</TT> function is shown in <A class="docLink" HREF="#ch08fig07">Figure 8.7</A>.</P>

<H5 class="docExampleTitle"><A NAME="ch08fig07"></A>Figure 8.7 UDP echo client.</H5>
<P class="docText"><span class="docEmphasis">udpcliserv/udpcli01.c</span></P>

<PRE>
 1 #include     "unp.h"

 2 int
 3 main(int argc, char **argv)
 4 {
 5     int     sockfd;
 6     struct sockaddr_in servaddr;

 7     if(argc != 2)
 8        err_quit("usage: udpcli &lt;IPaddress&gt;");

 9     bzero(&amp;servaddr, sizeof(servaddr));
10     servaddr.sin_family = AF_INET;
11     servaddr.sin_port = htons(SERV_PORT);
12     Inet_pton(AF_INET, argv[1], &amp;servaddr.sin_addr);

13     sockfd = Socket(AF_INET, SOCK_DGRAM, 0);

14     dg_cli(stdin, sockfd, (SA *) &amp;servaddr, sizeof(servaddr));

15     exit(0);
16 }
</PRE>

<A NAME="ch08lev3sec3"></A>
<H4 class="docSection2Title"> Fill in socket address structure with server's address</H4>
<p class="docText"><span class="docEmphasis"><TT>9–12</TT></span> An IPv4 socket address structure is filled in with the IP address and port number of the server. This structure will be passed to <TT>dg_cli</TT>, specifying where to send datagrams.</p>
<p class="docText"><span class="docEmphasis"><TT>13–14</TT></span> A UDP socket is created and the function <TT>dg_cli</TT> is called.</p>


<a href="0131411551_23961534.html"><img src="FILES/pixel.gif" width="1" height="1" border="0"></a><ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_ch08lev1sec4.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_ch08lev1sec6.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>

<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="7.2 'getsockopt' and 'setsockopt' Functions"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_ch07lev1sec1.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_ch07lev1sec3.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch07lev1sec2"></A>
<H3 class="docSection1Title">7.2 <TT>getsockopt</TT> and <TT>setsockopt</TT> Functions</H3>
<P class="docText">These two functions apply only to sockets.</P>
<P><TABLE CELLSPACING="0" BORDER="1" RULES="none" CELLPADDING="5" WIDTH="100%"><COLGROUP align="left" span="1"><THEAD></THEAD><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>#include &lt;sys/socket.h&gt;</TT></P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>int getsockopt</TT>(<TT>int</TT> <span class="docEmphasis">sockfd</span>, <TT>int</TT> <span class="docEmphasis">level</span>, <TT>int</TT> <span class="docEmphasis">optname</span>, <TT>void *</TT><span class="docEmphasis">optval</span>, <TT>socklen_t</TT> *<span class="docEmphasis">optlen</span>);</P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>int setsockopt</TT>(<TT>int</TT> <span class="docEmphasis">sockfd</span>, <TT>int</TT> <span class="docEmphasis">level</span>, <TT>int</TT> <span class="docEmphasis">optname</span>, <TT>const void *</TT><span class="docEmphasis">optval</span> <TT>socklen_t</TT> <span class="docEmphasis">optlen</span>);</P></TD></TR><TR><TD class="docTableCell" align="right" valign="top"><P class="docText">Both return: 0 if OK,–1 on error</P></TD></TR></COLGROUP></TABLE></P>
<P class="docText"><span class="docEmphasis">sockfd</span> must refer to an open socket descriptor. <span class="docEmphasis">level</span> specifies the code in the system that interprets the option: the general socket code or some protocol-specific code (e.g., IPv4, IPv6, TCP, or SCTP).</P>
<P class="docText"><span class="docEmphasis">optval</span> is a pointer to a variable from which the new value of the option is fetched by <TT>setsockopt</TT>, or into which the current value of the option is stored by <TT>getsockopt</TT>. The size of this variable is specified by the final argument, as a value for <TT>setsockopt</TT> and as a value-result for <TT>getsockopt</TT>.</P>
<P class="docText"><A class="docLink" HREF="#ch07fig01">Figures 7.1</A> and <A class="docLink" HREF="#ch07fig02">7.2</A> summarize the options that can be queried by <TT>getsockopt</TT> or set by <TT>setsockopt</TT>. The "Datatype" column shows the datatype of what the <span class="docEmphasis">optval</span> pointer must point to for each option. We use the notation of two braces to indicate a structure, as in <TT>linger{}</TT> to mean a <TT>struct linger</TT>.</P>
<CENTER>
<H5 class="docFigureTitle"><A NAME="ch07fig01"></A>Figure 7.1. Summary of socket and IP-layer socket options for <TT>getsockopt</TT> and <TT>setsockopt</TT>.</H5>

<p class="docText">
<IMG BORDER="0" WIDTH="500" HEIGHT="581" src="FILES/07fig01.gif" ALT="graphics/07fig01.gif"></p>

</CENTER>
<CENTER>
<H5 class="docFigureTitle"><A NAME="ch07fig02"></A>Figure 7.2. Summary of transport-layer socket options.</H5>

<p class="docText">
<IMG BORDER="0" WIDTH="500" HEIGHT="220" src="FILES/07fig02.gif" ALT="graphics/07fig02.gif"></p>

</CENTER>
<P class="docText">There are two basic types of options: binary options that enable or disable a certain feature (flags), and options that fetch and return specific values that we can either set or examine (values). The column labeled "Flag" specifies if the option is a flag option. When calling <TT>getsockopt</TT> for these flag options, <TT>*</TT><span class="docEmphasis">optval</span> is an integer. The value returned in <TT>*</TT><span class="docEmphasis">optval</span> is zero if the option is disabled, or nonzero if the option is enabled. Similarly, <TT>setsockopt</TT> requires a nonzero <TT>*</TT><span class="docEmphasis">optval</span> to turn the option on, and a zero value to turn the option off. If the "Flag" column does not contain a "&#8226;," then the option is used to pass a value of the specified datatype between the user process and the system.</P>
<P class="docText">Subsequent sections of this chapter will give additional details on the options that affect a socket.</P>

<ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_ch07lev1sec1.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_ch07lev1sec3.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>

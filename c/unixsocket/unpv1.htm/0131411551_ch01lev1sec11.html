<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="1.11 64-Bit Architectures"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_ch01lev1sec10.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_ch01lev1sec12.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch01lev1sec11"></A>
<H3 class="docSection1Title">1.11 64-Bit Architectures</H3>
<P class="docText">During the mid to late 1990s, the trend began toward 64-bit architectures and 64-bit software. One reason is for larger addressing within a process (i.e., 64-bit pointers), which can address large amounts of memory (more than 2<SUP>32</SUP> bytes). The common programming model for existing 32-bit Unix systems is called the <span class="docEmphasis">ILP32</span> model, denoting that integers (I), long integers (L), and pointers (P) occupy 32 bits. The model that is becoming most prevalent for 64-bit Unix systems is called the <span class="docEmphasis">LP64</span> model, meaning only long integers (L) and pointers (P) require 64 bits. <A class="docLink" HREF="#ch01fig17">Figure 1.17</A> compares these two models.</P>
<CENTER>
<H5 class="docFigureTitle"><A NAME="ch01fig17"></A>Figure 1.17. Comparison of number of bits to hold various datatypes for the ILP32 and LP64 models.</H5>

<p class="docText">
<IMG BORDER="0" WIDTH="323" HEIGHT="145" src="FILES/01fig17.gif" ALT="graphics/01fig17.gif"></p>

</CENTER>
<P class="docText">From a programming perspective, the LP64 model means we cannot assume that a pointer can be stored in an integer. We must also consider the effect of the LP64 model on existing APIs.</P>
<P class="docText">ANSI C invented the <TT>size_t</TT> datatype, which is used, for example, as the argument to <TT>malloc</TT> (the number of bytes to allocate), and as the third argument to <TT>read</TT> and <TT>write</TT> (the number of bytes to read or write). On a 32-bit system, <TT>size_t</TT> is a 32-bit value, but on a 64-bit system, it must be a 64-bit value, to take advantage of the larger addressing model. This means a 64-bit system will probably contain a <TT>typedef</TT> of <TT>size_t</TT> to be an <TT>unsigned long</TT>. The networking API problem is that some drafts of POSIX.1g specified that function arguments containing the size of a socket address structures have the <TT>size_t</TT> datatype (e.g., the third argument to <TT>bind</TT> and <TT>connect</TT>). Some XTI structures also had members with a datatype of <TT>long</TT> (e.g., the <TT>t_info</TT> and <TT>t_opthdr</TT> structures). If these had been left as is, both would change from 32-bit values to 64-bit values when a Unix system changes from the ILP32 to the LP64 model. In both instances, there is no need for a 64-bit datatype: The length of a socket address structure is a few hundred bytes at most, and the use of <TT>long</TT> for the XTI structure members was a mistake.</P>
<P class="docText">The solution is to use datatypes designed specifically to handle these scenarios. The sockets API uses the <TT>socklen_t</TT> datatype for lengths of socket address structures, and XTI uses the <TT>t_scalar_t</TT> and <TT>t_uscalar_t</TT> datatypes. The reason for not changing these values from 32 bits to 64 bits is to make it easier to provide binary compatibility on the new 64-bit systems for applications compiled under 32-bit systems.</P>

<ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_ch01lev1sec10.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_ch01lev1sec12.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>

<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="Exercises"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_ch07lev1sec12.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_ch08.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch07lev1sec13"></A>
<H3 class="docSection1Title"> Exercises</H3>
<P><TABLE BORDER="0" cellspacing="16" cellpadding="0"><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q01"></A><B>7.1</B></TD><TD><P class="docText">Write a program that prints the default TCP, UDP, and SCTP send and receive buffer sizes and run it on the systems to which you have access.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q02"></A><B><A class="docLink" HREF="0131411551_app05lev1sec7.html#ch07a02">7.2</A></B></TD><TD><P class="docText">Modify <A class="docLink" HREF="0131411551_ch01lev1sec2.html#ch01fig05">Figure 1.5</A> as follows: Before calling <TT>connect</TT>, call <TT>getsockopt</TT> to obtain the socket receive buffer size and MSS. Print both values. After <TT>connect</TT> returns success, fetch these same two socket options and print their values. Have the values changed? Why? Run the program connecting to a server on your local network and also run the program connecting to a server on a remote network. Does the MSS change? Why? You should also run the program on any different hosts to which you have access.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q03"></A><B><A class="docLink" HREF="0131411551_app05lev1sec7.html#ch07a03">7.3</A></B></TD><TD><P class="docText">Start with our TCP server from <A class="docLink" HREF="0131411551_ch05lev1sec2.html#ch05fig02">Figures 5.2</A> and <A class="docLink" HREF="0131411551_ch05lev1sec4.html#ch05fig03">5.3</A> and our TCP client from <A class="docLink" HREF="0131411551_ch05lev1sec4.html#ch05fig04">Figures 5.4</A> and <A class="docLink" HREF="0131411551_ch05lev1sec5.html#ch05fig05">5.5</A>. Modify the client <TT>main</TT> function to set the <TT>SO_LINGER</TT> socket option before calling <TT>exit</TT>, setting <TT>l_onoff</TT> to 1 and <TT>l_linger</TT> to 0. Start the server and then start the client. Type in a line or two at the client to verify the operation, and then terminate the client by entering your EOF character. What happens? After you terminate the client, run <TT>netstat</TT> on the client host and see if the socket goes through the TIME_WAIT state.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q04"></A><B><A class="docLink" HREF="0131411551_app05lev1sec7.html#ch07a04">7.4</A></B></TD><TD><P class="docText">Assume two TCP clients start at about the same time. Both set the <TT>SO_REUSEADDR</TT> socket option and then call <TT>bind</TT> with the same local IP address and the same local port (say 1500). But, one client <TT>connects</TT> to 198.69.10.2 port 7000 and the second <TT>connects</TT> to 198.69.10.2 (same peer IP address) but port 8000. Describe the race condition that occurs.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q05"></A><B><A class="docLink" HREF="0131411551_app05lev1sec7.html#ch07a05">7.5</A></B></TD><TD><P class="docText">Obtain the source code for the examples in this book (see the Preface) and compile the <TT>sock</TT> program (<A class="docLink" HREF="0131411551_app03lev1sec3.html#app03lev1sec3">Section C.3</A>). First, classify your host as (a) no multicast support, (b) multicast support but <TT>SO_REUSEPORT</TT> not provided, or (c) multicast support and <TT>SO_REUSEPORT</TT> provided. Try to start multiple instances of the <TT>sock</TT> program as a TCP server (<TT>-s</TT> command-line option) on the same port, binding the wildcard address, one of your host's interface addresses, and the loopback address. Do you need to specify the <TT>SO_REUSEADDR</TT> option (the <TT>-A</TT> command-line option)? Use <TT>netstat</TT> to see the listening sockets.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q06"></A><B><A class="docLink" HREF="0131411551_app05lev1sec7.html#ch07a06">7.6</A></B></TD><TD><P class="docText">Continue the previous example, but start a UDP server (<TT>-u</TT> command-line option) and try to start two instances, both binding the same local IP address and port. If your implementation supports <TT>SO_REUSEPORT</TT>, try using it (<TT>-T</TT> command-line option).</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q07"></A><B><A class="docLink" HREF="0131411551_app05lev1sec7.html#ch07a07">7.7</A></B></TD><TD><P class="docText">Many versions of the <TT>ping</TT> program have a <TT>-d</TT> flag to enable the <TT>SO_DEBUG</TT> socket option. What does this do?</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q08"></A><B><A class="docLink" HREF="0131411551_app05lev1sec7.html#ch07a08">7.8</A></B></TD><TD><P class="docText">Continuing the example at the end of our discussion of the <TT>TCP_NODELAY</TT> socket option, assume that a client performs two <TT>writes</TT>: the first of 4 bytes and the second of 396 bytes. Also assume that the server's delayed ACK time is 100 ms, the RTT between the client and server is 100 ms, and the server's processing time for the client's request is 50 ms. Draw a timeline that shows the interaction of the Nagle algorithm with delayed ACKs.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q09"></A><B><A class="docLink" HREF="0131411551_app05lev1sec7.html#ch07a09">7.9</A></B></TD><TD><P class="docText">Redo the previous exercise, assuming the <TT>TCP_NODELAY</TT> socket option is set.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q10"></A><B><A class="docLink" HREF="0131411551_app05lev1sec7.html#ch07a10">7.10</A></B></TD><TD><P class="docText">Redo <A class="docLink" HREF="#ch07lev1sec13">Exercises 7.8</A> assuming the process calls <TT>writev</TT> one time, for both the 4-byte buffer and the 396-byte buffer.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q11"></A><B><A class="docLink" HREF="0131411551_app05lev1sec7.html#ch07a11">7.11</A></B></TD><TD><P class="docText">Read RFC 1122 [Braden 1989] to determine the recommended interval for delayed ACKs.</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q12"></A><B><A class="docLink" HREF="0131411551_app05lev1sec7.html#ch07a12">7.12</A></B></TD><TD><P class="docText">Where does our server in <A class="docLink" HREF="0131411551_ch05lev1sec2.html#ch05fig02">Figures 5.2</A> and <A class="docLink" HREF="0131411551_ch05lev1sec4.html#ch05fig03">5.3</A> spend most of its time? Assume the server sets the <TT>SO_KEEPALIVE</TT> socket option, there is no data being exchanged across the connection, and the client host crashes and does not reboot. What happens?</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q13"></A><B><A class="docLink" HREF="0131411551_app05lev1sec7.html#ch07a13">7.13</A></B></TD><TD><P class="docText">Where does our client in <A class="docLink" HREF="0131411551_ch05lev1sec4.html#ch05fig04">Figures 5.4</A> and <A class="docLink" HREF="0131411551_ch05lev1sec5.html#ch05fig05">5.5</A> spend most of its time? Assume the client sets the <TT>SO_KEEPALIVE</TT> socket option, there is no data being exchanged across the connection, and the server host crashes and does not reboot. What happens?</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q14"></A><B><A class="docLink" HREF="0131411551_app05lev1sec7.html#ch07a14">7.14</A></B></TD><TD><P class="docText">Where does our client in <A class="docLink" HREF="0131411551_ch05lev1sec4.html#ch05fig04">Figures 5.4</A> and <A class="docLink" HREF="0131411551_ch06lev1sec7.html#ch06fig13">6.13</A> spend most of its time? Assume the client sets the <TT>SO_KEEPALIVE</TT> socket option, there is no data being exchanged across the connection, and the server host crashes and does not reboot. What happens?</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q15"></A><B><A class="docLink" HREF="0131411551_app05lev1sec7.html#ch07a15">7.15</A></B></TD><TD><P class="docText">Assume both a client and server set the <TT>SO_KEEPALIVE</TT> socket option. Connectivity is maintained between the two peers, but there is no application data exchanged across the connection. When the keep-alive timer expires every two hours, how many TCP segments are exchanged across the connection?</P></TD></TR><TR valign="top"><TD align="right" class="docText"><A NAME="ch07q16"></A><B><A class="docLink" HREF="0131411551_app05lev1sec7.html#ch07a16">7.16</A></B></TD><TD><P class="docText">Almost all implementations define the constant <TT>SO_ACCEPTCONN</TT> in the <TT>&lt;sys/socket.h&gt;</TT> header, but we have not described this option. Read [Lanciani 1996] to find out why this option exists.</P></TD></TR></TABLE></P><br>



<a href="0131411551_22961534.html"><img src="FILES/pixel.gif" width="1" height="1" border="0"></a><ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_ch07lev1sec12.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_ch08.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>

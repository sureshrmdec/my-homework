<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="9.13 'shutdown' Function"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131411551_ch09lev1sec12.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131411551_ch09lev1sec14.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch09lev1sec13"></A>
<H3 class="docSection1Title" id="225793-931">9.13 <TT>shutdown</TT> Function</H3>
<P class="docText">The <TT>shutdown</TT> function that we discussed in <A class="docLink" HREF="0131411551_ch06lev1sec6.html#ch06lev1sec6">Section 6.6</A> can be used with an SCTP endpoint using the one-to-one-style interface. Because SCTP's design does not provide a half-closed state, an SCTP endpoint reacts to a <TT>shutdown</TT> call differently than a TCP endpoint. When an SCTP endpoint initiates a shutdown sequence, both endpoints must complete transmission of any data currently in the queue and close the association. The endpoint that initiated the active open may wish to invoke <TT>shutdown</TT> instead of <TT>close</TT> so that the endpoint can be used to connect to a new peer. Unlike TCP, a <TT>close</TT> followed by the opening of a new socket is not required. SCTP allows the endpoint to issue a <TT>shutdown</TT>, and after the <TT>shutdown</TT> completes, the endpoint can reuse the socket to connect to a new peer. Note that the new connection will fail if the endpoint does not wait until the SCTP shutdown sequence completes. <A class="docLink" HREF="#ch09fig05">Figure 9.5</A> shows the typical function calls in this scenario.</P>
<CENTER>
<H5 class="docFigureTitle"><A NAME="ch09fig05"></A>Figure 9.5. Calling <TT>shutdown</TT> to close an SCTP association.</H5>

<p class="docText">
<IMG BORDER="0" id="129022115118" WIDTH="500" HEIGHT="311" src="FILES/09fig05.gif" ALT="graphics/09fig05.gif"></p>

</CENTER>
<P class="docText">Note that in <A class="docLink" HREF="#ch09fig05">Figure 9.5</A>, we depict the user receiving the <TT>MSG_NOTIFICATION</TT> events. If the user had not subscribed to receive these events, then a read of length 0 would have been returned. The effects of the <TT>shutdown</TT> function for TCP were described in <A class="docLink" HREF="0131411551_ch06lev1sec6.html#ch06lev1sec6">Section 6.6</A>. The <TT>shutdown</TT> function <span class="docEmphasis">howto</span> holds the following semantics for SCTP:</P>
<P><TABLE CELLSPACING="0" FRAME="void" RULES="none" CELLPADDING="5" WIDTH="100%"><COLGROUP align="left" span="2"><THEAD></THEAD><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>SHUT_RD</TT></P></TD><TD class="docTableCell" valign="top"><P class="docText">The same semantics as for TCP discussed in <A class="docLink" HREF="0131411551_ch06lev1sec6.html#ch06lev1sec6">Section 6.6</A>; no SCTP protocol action is taken.</P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>SHUT_WR</TT></P></TD><TD class="docTableCell" valign="top"><P class="docText">Disables further send operations and initiates the SCTP shutdown procedures, which will terminate the association. Note that this option does not provide a half-closed state, but does allow the local endpoint to read any queued data that the peer may have sent prior to receiving the SCTP SHUTDOWN message.</P></TD></TR><TR><TD class="docTableCell" valign="top"><P class="docText"><TT>SHUT_RDWR</TT></P></TD><TD class="docTableCell" valign="top"><P class="docText">Disables all <TT>read</TT> and <TT>write</TT> operations, and initiates the SCTP shutdown procedure. Any queued data that was in transit to the local endpoint will be acknowledged and then silently discarded.</P></TD></TR></COLGROUP></TABLE></P>

<ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131411551_ch09lev1sec12.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131411551_ch09lev1sec14.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>
